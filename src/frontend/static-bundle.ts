// Auto-generated by frontend/scripts/export-static-bundle.mjs.
export const STATIC_BUNDLE = {
  "index.html": "<!doctype html>\n<html lang=\"en-ZA\">\n  <head>\n    <meta charset=\"UTF-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <title>GreenBro - Heat Pump Dashboard</title>\n    <link rel=\"icon\" type=\"image/svg+xml\" href=\"/app/assets/GREENBRO LOGO APP.svg\" />\n    <script type=\"module\" crossorigin src=\"/app/assets/index-CAv5rt5M.js\"></script>\n    <link rel=\"stylesheet\" crossorigin href=\"/app/assets/index-y6znqhWW.css\">\n  </head>\n  <body>\n    <div id=\"root\"></div>\n  </body>\n</html>\n",
  "assets/AdminArchivePage-eBZK27bO.js": "import{u as o,r as t,j as e,L as m}from\"./index-CAv5rt5M.js\";import{P as r,b as h,a as v}from\"./format-BvCvFL95.js\";function f(){const c=o(),[d,l]=t.useState(\"loading\"),[a,n]=t.useState(null);return t.useEffect(()=>{const s=new AbortController;return l(\"loading\"),c.get(\"/api/archive/offline\",{signal:s.signal}).then(i=>{n(i),l(\"ready\")}).catch(i=>{i instanceof DOMException&&i.name===\"AbortError\"||l(\"error\")}),()=>s.abort()},[c]),d===\"loading\"?e.jsx(r,{title:\"Archive\",children:e.jsx(\"div\",{className:\"card\",children:\"Loading...\"})}):d===\"error\"||!a?e.jsx(r,{title:\"Archive\",children:e.jsx(\"div\",{className:\"card callout error\",children:\"Unable to load archive data\"})}):e.jsxs(r,{title:\"Archive\",children:[e.jsxs(\"div\",{className:\"card\",children:[e.jsxs(\"div\",{className:\"card-header\",children:[e.jsx(\"div\",{className:\"card-title\",children:\"Offline devices\"}),e.jsxs(\"span\",{className:\"pill\",children:[a.offline?.length??0,\" entries\"]})]}),a.offline?.length?e.jsx(\"div\",{className:\"stack\",children:a.offline.map(s=>e.jsxs(\"div\",{className:\"list-item\",children:[e.jsxs(\"div\",{children:[e.jsx(\"div\",{className:\"font-semibold\",children:s.device_id}),s.site?e.jsx(\"div\",{className:\"subdued\",children:s.site}):null,e.jsxs(\"div\",{className:\"meta\",children:[\"Last heartbeat \",h(s.last_seen_at)]})]}),e.jsxs(\"div\",{className:\"text-right\",children:[e.jsxs(\"div\",{className:\"meta\",children:[\"Alerts \",s.alerts]}),e.jsx(m,{to:`/app/device?device=${encodeURIComponent(s.lookup)}`,className:\"link\",children:\"Open\"})]})]},s.lookup))}):e.jsx(\"div\",{className:\"empty\",children:\"No offline devices found\"})]}),e.jsxs(\"div\",{className:\"card mt-1\",children:[e.jsx(\"div\",{className:\"card-header\",children:e.jsx(\"div\",{className:\"card-title\",children:\"Telemetry archive volume\"})}),a.history?.length?e.jsx(\"div\",{className:\"history-grid\",children:a.history.map((s,i)=>e.jsxs(\"div\",{className:\"history-card\",children:[e.jsx(\"strong\",{children:s.day}),e.jsxs(\"div\",{className:\"subdued\",children:[v(s.samples??0,0),\" samples\"]})]},`${s.day}-${i}`))}):e.jsx(\"div\",{className:\"empty\",children:\"No recent telemetry samples\"})]})]})}export{f as default};\n",
  "assets/AdminPage-Bf9ziHWx.js": "import{u as m,r,j as e,L as u}from\"./index-CAv5rt5M.js\";import{P as c,a as l,c as h}from\"./format-BvCvFL95.js\";function f(){const n=m(),[a,d]=r.useState(\"loading\"),[t,x]=r.useState(null);if(r.useEffect(()=>{const s=new AbortController;return d(\"loading\"),n.get(\"/api/fleet/admin-overview\",{signal:s.signal}).then(i=>{x(i),d(\"ready\")}).catch(i=>{i instanceof DOMException&&i.name===\"AbortError\"||d(\"error\")}),()=>s.abort()},[n]),a===\"loading\")return e.jsx(c,{title:\"Admin\",children:e.jsx(\"div\",{className:\"card\",children:\"Loading...\"})});if(a===\"error\"||!t)return e.jsx(c,{title:\"Admin\",children:e.jsx(\"div\",{className:\"card callout error\",children:\"Unable to load admin overview\"})});const j=p(t.ops_summary),o=t.ops_window?`Window: last ${l(t.ops_window.days,0)} days (since ${h(t.ops_window.start)})`:null;return e.jsxs(c,{title:\"Admin\",children:[e.jsxs(\"div\",{className:\"card\",children:[e.jsxs(\"div\",{className:\"card-header\",children:[e.jsx(\"div\",{className:\"card-title\",children:\"Tenants\"}),e.jsxs(\"span\",{className:\"pill\",children:[t.tenants?.length??0,\" profiles\"]})]}),t.tenants?.length?e.jsx(\"div\",{className:\"min-table\",children:e.jsxs(\"table\",{className:\"table\",children:[e.jsx(\"thead\",{children:e.jsxs(\"tr\",{children:[e.jsx(\"th\",{children:\"Profile\"}),e.jsx(\"th\",{children:\"Devices\"}),e.jsx(\"th\",{children:\"Online\"})]})}),e.jsx(\"tbody\",{children:t.tenants.map(s=>e.jsxs(\"tr\",{children:[e.jsx(\"td\",{children:s.profile_id}),e.jsx(\"td\",{children:l(s.device_count??0,0)}),e.jsx(\"td\",{children:l(s.online_count??0,0)})]},s.profile_id))})]})}):e.jsx(\"div\",{className:\"empty\",children:\"No tenant data\"})]}),e.jsxs(\"div\",{className:\"card mt-1\",children:[e.jsxs(\"div\",{className:\"card-header\",children:[e.jsx(\"div\",{className:\"card-title\",children:\"Recent operations\"}),e.jsxs(\"span\",{className:\"pill\",children:[t.ops?.length??0,\" events\"]})]}),t.ops?.length?e.jsx(\"div\",{className:\"min-table\",children:e.jsxs(\"table\",{className:\"table\",children:[e.jsx(\"thead\",{children:e.jsxs(\"tr\",{children:[e.jsx(\"th\",{children:\"Timestamp\"}),e.jsx(\"th\",{children:\"Route\"}),e.jsx(\"th\",{children:\"Status\"}),e.jsx(\"th\",{children:\"Duration ms\"}),e.jsx(\"th\",{children:\"Device\"})]})}),e.jsx(\"tbody\",{children:t.ops.map((s,i)=>e.jsxs(\"tr\",{children:[e.jsx(\"td\",{children:h(s.ts)}),e.jsx(\"td\",{children:s.route}),e.jsx(\"td\",{children:s.status_code}),e.jsx(\"td\",{children:s.duration_ms}),e.jsx(\"td\",{children:s.device_id?e.jsx(u,{className:\"link\",to:`/app/device?device=${encodeURIComponent(s.lookup??\"\")}`,children:s.device_id}):\"-\"})]},`${s.ts}-${i}`))})]})}):e.jsx(\"div\",{className:\"empty\",children:\"No recent operations in scope\"}),e.jsxs(\"div\",{className:\"subdued mt-06\",children:[\"Status mix: \",j]}),o?e.jsx(\"div\",{className:\"subdued\",children:o}):null]})]})}function p(n){if(!n)return\"n/a\";const a=Object.entries(n);return a.length?a.map(([d,t])=>`${d}: ${l(t,0)}`).join(\" | \"):\"n/a\"}export{f as default};\n",
  "assets/AlertsPage-CiG2Kh3G.js": "import{u as p,b as g,r as c,j as s}from\"./index-CAv5rt5M.js\";import{P as d,a as h,b as u}from\"./format-BvCvFL95.js\";function w(){const e=p(),[x]=g(),[i,v]=c.useState(null),[n,l]=c.useState(\"loading\"),a=x.get(\"hours\")??void 0;c.useEffect(()=>{const t=new AbortController;l(\"loading\");const o=new URLSearchParams;a&&o.set(\"hours\",a);const m=o.toString(),N=m?\"/api/alerts/recent?\"+m:\"/api/alerts/recent\";return e.get(N,{signal:t.signal}).then(r=>{v(r),l(\"ready\")}).catch(r=>{r instanceof DOMException&&r.name===\"AbortError\"||l(\"error\")}),()=>t.abort()},[e,a]);const j=c.useMemo(()=>a?`${a}h`:\"72h\",[a]);return n===\"loading\"?s.jsx(d,{title:\"Alerts\",children:s.jsx(\"div\",{className:\"card\",children:\"Loading...\"})}):n===\"error\"||!i?s.jsx(d,{title:\"Alerts\",children:s.jsx(\"div\",{className:\"card callout error\",children:\"Unable to load alerts\"})}):s.jsxs(d,{title:\"Alerts\",children:[s.jsxs(\"div\",{className:\"grid kpis\",children:[s.jsxs(\"div\",{className:\"card tight\",children:[s.jsx(\"div\",{className:\"muted\",children:\"Total alerts\"}),s.jsx(\"div\",{className:\"large-number\",children:h(i.stats?.total??0,0)})]}),s.jsxs(\"div\",{className:\"card tight\",children:[s.jsx(\"div\",{className:\"muted\",children:\"Active now\"}),s.jsx(\"div\",{className:\"large-number\",children:h(i.stats?.active??0,0)})]}),s.jsxs(\"div\",{className:\"card tight\",children:[s.jsx(\"div\",{className:\"muted\",children:\"Window\"}),s.jsxs(\"div\",{className:\"large-number\",children:[\"Last \",j]})]})]}),s.jsx(\"div\",{className:\"stack\",children:i.items?.length?i.items.map(t=>s.jsx(f,{alert:t},t.lookup)):s.jsx(\"div\",{className:\"card\",children:s.jsx(\"div\",{className:\"empty\",children:\"No alerts during this window\"})})})]})}function f({alert:e}){return s.jsxs(\"div\",{className:\"card\",children:[s.jsxs(\"div\",{className:\"card-header\",children:[s.jsxs(\"div\",{children:[s.jsx(\"div\",{className:\"card-title\",children:e.device_id}),e.site?s.jsx(\"div\",{className:\"subdued\",children:e.site}):null]}),s.jsx(\"span\",{className:`pill${e.active?\" warn\":\"\"}`,children:e.active?\"Active\":\"Cleared\"})]}),s.jsx(\"div\",{className:\"list\",children:s.jsxs(\"div\",{className:\"list-item\",children:[s.jsxs(\"div\",{children:[s.jsx(\"div\",{children:e.faults?.join(\", \")||\"Fault reported\"}),s.jsxs(\"div\",{className:\"meta\",children:[\"Triggered \",u(e.ts)]})]}),s.jsxs(\"div\",{className:\"text-right\",children:[s.jsx(\"div\",{className:\"meta\",children:e.last_update?`Last update ${u(e.last_update)}`:\"No recent update\"}),s.jsx(\"a\",{href:`/app/device?device=${encodeURIComponent(e.lookup)}`,className:\"link inline-link\",children:\"Inspect device\"})]})]})})]})}export{w as default};\n",
  "assets/CommissioningPage-CNVLMK2O.js": "import{u as x,r as d,j as s}from\"./index-CAv5rt5M.js\";import{P as m,a as i,b as f}from\"./format-BvCvFL95.js\";function k(){const e=x(),[a,n]=d.useState(\"loading\"),[o,c]=d.useState(null);if(d.useEffect(()=>{const l=new AbortController;return n(\"loading\"),e.get(\"/api/commissioning/checklist\",{signal:l.signal}).then(t=>{const u=(t.devices??[]).map(g);c({summary:t.summary,devices:u}),n(\"ready\")}).catch(t=>{t instanceof DOMException&&t.name===\"AbortError\"||n(\"error\")}),()=>l.abort()},[e]),a===\"loading\")return s.jsx(m,{title:\"Commissioning & QA\",children:s.jsx(\"div\",{className:\"card\",children:\"Loading...\"})});if(a===\"error\"||!o)return s.jsx(m,{title:\"Commissioning & QA\",children:s.jsx(\"div\",{className:\"card callout error\",children:\"Unable to load commissioning status\"})});const{summary:r,devices:p}=o,h=r.total?Math.round((r.ready??0)/r.total*100):0;return s.jsxs(m,{title:\"Commissioning & QA\",children:[s.jsxs(\"div\",{className:\"card\",children:[s.jsxs(\"div\",{className:\"card-header\",children:[s.jsx(\"div\",{className:\"card-title\",children:\"Readiness overview\"}),s.jsxs(\"span\",{className:\"pill\",children:[r.ready,\" ready of \",r.total]})]}),s.jsx(\"div\",{className:\"callout mt-06\",children:r.total?`${h}% checklist complete across fleet`:\"No devices in scope\"})]}),s.jsx(\"div\",{className:\"stack mt-1\",children:p.map(l=>s.jsxs(\"div\",{className:\"card\",children:[s.jsxs(\"div\",{className:\"card-header\",children:[s.jsxs(\"div\",{children:[s.jsx(\"div\",{className:\"card-title\",children:l.device_id}),l.site?s.jsx(\"div\",{className:\"subdued\",children:l.site}):null]}),s.jsxs(\"span\",{className:`pill${l.progress>=.86?\"\":\" warn\"}`,children:[i(l.progress*100,0),\"%\"]})]}),s.jsxs(\"div\",{className:\"subdued\",children:[\"Last heartbeat \",f(l.last_seen_at??l.updated_at)]}),s.jsx(\"progress\",{className:\"progress-bar\",max:100,value:Math.round(l.progress*100)}),s.jsx(\"div\",{className:\"checklist\",children:l.checklist.map(t=>s.jsxs(\"div\",{className:`check-item${t.pass?\"\":\" fail\"}`,children:[s.jsx(\"span\",{children:t.label}),s.jsx(\"span\",{className:\"subdued\",children:t.detail})]},t.key))}),s.jsx(\"div\",{className:\"mt-06\",children:s.jsx(\"a\",{href:`/app/device?device=${encodeURIComponent(l.lookup)}`,className:\"link\",children:\"Open device\"})})]},l.lookup))})]})}function g(e){const a=j(e),n=a.filter(c=>c.pass).length,o=a.length?n/a.length:0;return{...e,checklist:a,progress:o}}function j(e){const a=[];return a.push({key:\"online\",label:\"Device online\",detail:e.online?\"Heartbeat received\":\"Waiting for heartbeat\",pass:e.online}),a.push({key:\"flow\",label:\"Flow sensor reporting\",detail:e.flowLps!==null?`${i(e.flowLps,2)} L/s`:\"No flow telemetry yet\",pass:typeof e.flowLps==\"number\"}),a.push({key:\"delta\",label:\"Î”T above 3Â°C\",detail:e.deltaT!==null?`${i(e.deltaT,1)} Â°C`:\"Î”T unavailable\",pass:typeof e.deltaT==\"number\"&&e.deltaT>=3}),a.push({key:\"thermal\",label:\"Thermal output reported\",detail:e.thermalKW!==null?`${i(e.thermalKW,2)} kW`:\"No thermal telemetry\",pass:typeof e.thermalKW==\"number\"}),a.push({key:\"mode\",label:\"Operating mode detected\",detail:e.mode??\"Mode unknown\",pass:!!e.mode}),a}export{k as default};\n",
  "assets/CompactDashboardPage-azXId9pO.js": "import{u as y,r as c,j as e}from\"./index-CAv5rt5M.js\";import{P as m,f as _,a as n,b as u}from\"./format-BvCvFL95.js\";import{S as k}from\"./Sparkline-D2W6pTJo.js\";function O(){const o=y(),[a,v]=c.useState(null),[r,p]=c.useState([]),[x,j]=c.useState(\"loading\"),[t,h]=c.useState(\"cop\");c.useEffect(()=>{const s=new AbortController;let i=!1;async function b(){try{const d=await o.get(\"/api/client/compact\",{signal:s.signal});i||(v(d),j(\"ready\"))}catch(d){!i&&!(d instanceof DOMException&&d.name===\"AbortError\")&&j(\"error\")}}async function g(){try{const d=await o.get(\"/api/devices?mine=1&limit=12\",{signal:s.signal});i||p(d.items??[])}catch{}}return b(),g(),()=>{i=!0,s.abort()}},[o]);const N=c.useMemo(()=>a?(a.trend??[]).map(s=>{const i=s[t];return typeof i==\"number\"?i:null}):[],[a,t]),f=c.useMemo(()=>{switch(t){case\"cop\":return\"Fleet average COP\";case\"thermalKW\":return\"Thermal output (kW)\";case\"deltaT\":return\"?T average (Â°C)\";default:return\"\"}},[t]);if(x===\"loading\")return e.jsx(m,{title:\"My Sites - Compact\",children:e.jsx(\"div\",{className:\"card\",children:\"Loading...\"})});if(x===\"error\"||!a)return e.jsx(m,{title:\"My Sites - Compact\",children:e.jsx(\"div\",{className:\"card callout error\",children:\"Unable to load dashboard data\"})});const l=a.kpis;return e.jsxs(m,{title:\"My Sites - Compact\",children:[e.jsxs(\"div\",{className:\"grid kpis\",children:[e.jsxs(\"div\",{className:\"card tight\",children:[e.jsx(\"div\",{className:\"muted\",children:\"Online rate\"}),e.jsx(\"div\",{className:\"large-number\",children:_(l.online_pct)}),e.jsxs(\"div\",{className:\"subdued\",children:[l.devices_online,\"/\",l.devices_total,\" devices online\"]})]}),e.jsxs(\"div\",{className:\"card tight\",children:[e.jsx(\"div\",{className:\"muted\",children:\"Open alerts\"}),e.jsx(\"div\",{className:\"large-number\",children:n(l.open_alerts??0,0)}),e.jsx(\"div\",{className:\"subdued\",children:a.alerts?.length?`${a.alerts.length} devices affected`:\"Monitoring\"})]}),e.jsxs(\"div\",{className:\"card tight\",children:[e.jsx(\"div\",{className:\"muted\",children:\"Avg COP\"}),e.jsx(\"div\",{className:\"large-number\",children:n(l.avg_cop,2)}),e.jsxs(\"div\",{className:\"subdued\",children:[\"Window start \",u(a.window_start_ms)]})]}),e.jsxs(\"div\",{className:\"card tight\",children:[e.jsx(\"div\",{className:\"muted\",children:\"Low ?T (24h)\"}),e.jsx(\"div\",{className:\"large-number\",children:n(l.low_deltaT_count??0,0)}),e.jsx(\"div\",{className:\"subdued\",children:l.max_heartbeat_age_sec?`Oldest heartbeat ${n((l.max_heartbeat_age_sec??0)/60,1)}m`:\"All fresh\"})]})]}),e.jsxs(\"div\",{className:\"card chart-card\",children:[e.jsxs(\"div\",{className:\"card-header\",children:[e.jsxs(\"div\",{children:[e.jsx(\"div\",{className:\"muted\",children:\"Performance trend\"}),e.jsx(\"div\",{className:\"trend-subtitle\",children:f})]}),e.jsxs(\"div\",{className:\"tabs\",children:[e.jsx(\"button\",{type:\"button\",className:`btn ghost${t===\"cop\"?\" active\":\"\"}`,onClick:()=>h(\"cop\"),children:\"COP\"}),e.jsx(\"button\",{type:\"button\",className:`btn ghost${t===\"thermalKW\"?\" active\":\"\"}`,onClick:()=>h(\"thermalKW\"),children:\"Thermal kW\"}),e.jsx(\"button\",{type:\"button\",className:`btn ghost${t===\"deltaT\"?\" active\":\"\"}`,onClick:()=>h(\"deltaT\"),children:\"?T\"})]})]}),e.jsx(\"div\",{className:\"card-section\",children:e.jsx(k,{values:N,color:t===\"cop\"?\"#52ff99\":t===\"thermalKW\"?\"#7d96ff\":\"#ffcc66\"})})]}),e.jsxs(\"div\",{className:\"card\",children:[e.jsxs(\"div\",{className:\"card-header\",children:[e.jsx(\"div\",{className:\"card-title\",children:\"Recent alerts\"}),a.alerts?.length?e.jsxs(\"span\",{className:\"pill warn\",children:[a.alerts.length,\" active\"]}):e.jsx(\"span\",{className:\"pill\",children:\"Stable\"})]}),a.alerts?.length?e.jsx(\"div\",{className:\"list\",children:a.alerts.map(s=>e.jsxs(\"div\",{className:\"list-item\",children:[e.jsxs(\"div\",{children:[e.jsx(\"div\",{className:\"font-semibold\",children:s.device_id}),s.site?e.jsx(\"div\",{className:\"subdued\",children:s.site}):null,e.jsxs(\"div\",{className:\"meta\",children:[\"Updated \",u(s.updated_at)]})]}),e.jsxs(\"div\",{className:\"text-right\",children:[e.jsx(\"div\",{children:s.faults?.slice(0,3).join(\", \")||\"Fault reported\"}),e.jsx(\"div\",{className:\"meta\",children:s.faults&&s.faults.length>3?`+${s.faults.length-3} more`:\"\"}),e.jsx(\"a\",{href:`/app/device?device=${encodeURIComponent(s.lookup)}`,className:\"link inline-link\",children:\"Open\"})]})]},s.lookup))}):e.jsx(\"div\",{className:\"empty\",children:\"No alerts in the selected window\"})]}),e.jsxs(\"div\",{className:\"card\",children:[e.jsxs(\"div\",{className:\"card-header\",children:[e.jsx(\"div\",{className:\"card-title\",children:\"Device roster\"}),e.jsx(\"div\",{className:\"subdued\",children:r.length?`${r.length} listed`:\"No devices yet\"})]}),r.length?e.jsx(\"div\",{className:\"min-table\",children:e.jsxs(\"table\",{className:\"table\",children:[e.jsx(\"thead\",{children:e.jsxs(\"tr\",{children:[e.jsx(\"th\",{children:\"Device\"}),e.jsx(\"th\",{children:\"Site\"}),e.jsx(\"th\",{children:\"Online\"}),e.jsx(\"th\",{children:\"Last heartbeat\"}),e.jsx(\"th\",{children:\"Firmware\"})]})}),e.jsx(\"tbody\",{children:r.map(s=>e.jsxs(\"tr\",{children:[e.jsx(\"td\",{children:e.jsx(\"a\",{href:`/app/device?device=${encodeURIComponent(s.lookup)}`,className:\"link\",children:s.device_id||\"(device)\"})}),e.jsx(\"td\",{children:s.site??\"-\"}),e.jsx(\"td\",{children:e.jsx(\"span\",{className:`status-dot${s.online?\" ok\":\"\"}`,title:s.online?\"Online\":\"Offline\"})}),e.jsx(\"td\",{children:u(s.last_seen_at)}),e.jsx(\"td\",{children:s.firmware??\"-\"})]},s.lookup))})]})}):e.jsx(\"div\",{className:\"empty\",children:\"No devices in scope\"})]})]})}export{O as default};\n",
  "assets/DeviceDetailPage-B9wux4UQ.js": "import{u as z,a as G,r as a,b as J,j as e}from\"./index-CAv5rt5M.js\";import{b as P,a as n,P as Q,c as X}from\"./format-BvCvFL95.js\";import{S as b}from\"./Sparkline-D2W6pTJo.js\";function te(){const l=z(),o=G().user,m=a.useMemo(()=>(o?.roles??[]).some(s=>s.toLowerCase()===\"admin\"),[o?.roles]),[$,R]=a.useState(()=>!m),[w,M]=J(),A=w.get(\"device\")??\"\",[y,_]=a.useState([]),[r,S]=a.useState(A),[j,E]=a.useState(null),[N,K]=a.useState(null),[O,F]=a.useState(\"\"),[U,C]=a.useState(!1),[I,W]=a.useState(!1),x=m?$:!0;a.useEffect(()=>{let s=!1;async function t(){try{const f=new URLSearchParams({limit:\"50\",mine:x?\"1\":\"0\"}),c=await l.get(`/api/devices?${f.toString()}`);if(s)return;const p=c.items??[];_(p),S(D=>D&&p.some(V=>V.lookup===D)?D:p[0]?.lookup??\"\")}catch{s||(_([]),S(\"\"))}}return t(),()=>{s=!0}},[l,x]);const k=a.useCallback(async s=>{if(s){C(!0),W(!1);try{const t=new URLSearchParams({scope:\"device\",device:s,interval:\"5m\",limit:\"120\",fill:\"carry\"}),[f,c]=await Promise.all([l.post(\"/api/telemetry/latest-batch\",{devices:[s]}),l.get(`/api/telemetry/series?${t.toString()}`)]),p=f.items?.[0]??null;E(p),K(c),F(p?.device_id??\"\"),C(!1)}catch{W(!0),C(!1)}}},[l]);a.useEffect(()=>{r&&(k(r),M(s=>{const t=new URLSearchParams(s);return t.set(\"device\",r),t}))},[k,r,M]);const i=a.useMemo(()=>j?.latest??{},[j]),T=a.useMemo(()=>y.find(s=>s.lookup===r)??null,[y,r]),d=a.useMemo(()=>{const s=N?.series??[];return{supply:s.map(t=>u(t,\"supplyC\")),return:s.map(t=>u(t,\"returnC\")),thermal:s.map(t=>u(t,\"thermalKW\")),cop:s.map(t=>u(t,\"cop\"))}},[N]),L=a.useMemo(()=>(N?.series??[]).slice(-10).reverse(),[N]),B=a.useMemo(()=>{const s=O.trim();return s.length>0?s:j?.device_id??\"-\"},[O,j]),q=i.updated_at!=null?`Updated ${P(i.updated_at)}`:i.ts!=null?`Sample ${P(i.ts)}`:\"\",H=m?e.jsxs(\"div\",{className:\"tabs\",role:\"group\",\"aria-label\":\"Device scope filter\",children:[e.jsx(\"button\",{type:\"button\",className:`btn ghost${x?\" active\":\"\"}`,\"aria-pressed\":x,onClick:()=>R(!0),children:\"Assigned\"}),e.jsx(\"button\",{type:\"button\",className:`btn ghost${x?\"\":\" active\"}`,\"aria-pressed\":!x,onClick:()=>R(!1),children:\"All devices\"})]}):null,h=a.useCallback((s,t,f=1)=>{const c=i[s];return c==null?e.jsxs(\"div\",{className:\"metric-tile\",children:[e.jsx(\"div\",{className:\"metric-label\",children:t}),e.jsx(\"div\",{className:\"metric-value\",children:\"-\"})]},String(s)):typeof c==\"number\"?e.jsxs(\"div\",{className:\"metric-tile\",children:[e.jsx(\"div\",{className:\"metric-label\",children:t}),e.jsx(\"div\",{className:\"metric-value\",children:n(c,f)})]},String(s)):e.jsxs(\"div\",{className:\"metric-tile\",children:[e.jsx(\"div\",{className:\"metric-label\",children:t}),e.jsx(\"div\",{className:\"metric-value\",children:Y(c)})]},String(s))},[i]);return e.jsx(Q,{title:\"Device detail\",actions:H,children:e.jsxs(\"div\",{className:\"card\",children:[e.jsxs(\"div\",{className:\"flex\",children:[e.jsxs(\"div\",{className:\"flex-basis-220\",children:[e.jsx(\"label\",{className:\"muted\",htmlFor:\"device-select\",children:\"Device\"}),e.jsxs(\"select\",{id:\"device-select\",value:r,onChange:s=>S(s.target.value),children:[e.jsx(\"option\",{value:\"\",children:\"Select a device\"}),y.map(s=>e.jsx(\"option\",{value:s.lookup,children:s.device_id},s.lookup))]})]}),e.jsx(\"button\",{type:\"button\",className:\"btn align-self-end\",onClick:()=>{r&&k(r)},disabled:!r||U,children:U?\"Loading...\":\"Refresh\"})]}),I?e.jsx(\"div\",{className:\"callout error mt-1\",children:\"Unable to load device data\"}):null,j?e.jsxs(\"div\",{className:\"stack mt-1\",children:[e.jsxs(\"div\",{className:\"grid-3\",children:[e.jsxs(\"div\",{className:\"card tight\",children:[e.jsx(\"div\",{className:\"muted\",children:\"Device ID\"}),e.jsx(\"div\",{className:\"large-number\",children:B}),e.jsx(\"div\",{className:\"subdued\",children:q})]}),e.jsxs(\"div\",{className:\"card tight\",children:[e.jsx(\"div\",{className:\"muted\",children:\"Status\"}),e.jsxs(\"div\",{className:\"status-row\",children:[e.jsx(\"span\",{className:`status-dot${i.online?\" ok\":\"\"}`,title:i.online?\"Online\":\"Offline\"}),e.jsx(\"span\",{children:i.online?\"Online\":\"Offline\"})]}),e.jsx(\"div\",{className:\"subdued\",children:i.mode??\"Mode unknown\"})]}),e.jsxs(\"div\",{className:\"card tight\",children:[e.jsx(\"div\",{className:\"muted\",children:\"Site\"}),e.jsx(\"div\",{className:\"large-number\",children:T?.site??\"-\"}),e.jsxs(\"div\",{className:\"subdued\",children:[\"Last heartbeat \",P(T?.last_seen_at??null)]})]})]}),e.jsxs(\"div\",{className:\"metric-grid\",children:[h(\"supplyC\",\"Supply Â°C\",1),h(\"returnC\",\"Return Â°C\",1),h(\"deltaT\",\"Î”T Â°C\",1),h(\"thermalKW\",\"Thermal kW\",2),h(\"cop\",\"COP\",2),h(\"flowLps\",\"Flow L/s\",2),h(\"powerKW\",\"Power kW\",2)]}),e.jsxs(\"div\",{className:\"grid auto mt-1\",children:[e.jsxs(\"div\",{className:\"card tight\",children:[e.jsx(\"div\",{className:\"muted\",children:\"Supply trend\"}),e.jsx(b,{values:d.supply,color:\"#52ff99\"}),e.jsxs(\"div\",{className:\"subdued\",children:[\"Latest \",n(g(d.supply),1),\" \\\\u00B0C\"]})]}),e.jsxs(\"div\",{className:\"card tight\",children:[e.jsx(\"div\",{className:\"muted\",children:\"Return trend\"}),e.jsx(b,{values:d.return,color:\"#86a5ff\"}),e.jsxs(\"div\",{className:\"subdued\",children:[\"Latest \",n(g(d.return),1),\" \\\\u00B0C\"]})]}),e.jsxs(\"div\",{className:\"card tight\",children:[e.jsx(\"div\",{className:\"muted\",children:\"Thermal output\"}),e.jsx(b,{values:d.thermal,color:\"#ffcc66\"}),e.jsxs(\"div\",{className:\"subdued\",children:[\"Latest \",n(g(d.thermal),2),\" kW\"]})]}),e.jsxs(\"div\",{className:\"card tight\",children:[e.jsx(\"div\",{className:\"muted\",children:\"COP trend\"}),e.jsx(b,{values:d.cop,color:\"#52ff99\"}),e.jsxs(\"div\",{className:\"subdued\",children:[\"Latest \",n(g(d.cop),2)]})]})]}),L.length?e.jsxs(\"div\",{className:\"card mt-1\",children:[e.jsxs(\"div\",{className:\"card-header\",children:[e.jsx(\"div\",{className:\"card-title\",children:\"Recent telemetry\"}),e.jsxs(\"div\",{className:\"subdued\",children:[L.length,\" buckets\"]})]}),e.jsx(\"div\",{className:\"min-table\",children:e.jsxs(\"table\",{className:\"table\",children:[e.jsx(\"thead\",{children:e.jsxs(\"tr\",{children:[e.jsx(\"th\",{children:\"Timestamp\"}),e.jsx(\"th\",{children:\"Samples\"}),e.jsx(\"th\",{children:\"Supply\"}),e.jsx(\"th\",{children:\"Return\"}),e.jsx(\"th\",{children:\"Thermal kW\"}),e.jsx(\"th\",{children:\"COP\"})]})}),e.jsx(\"tbody\",{children:L.map(s=>e.jsxs(\"tr\",{children:[e.jsx(\"td\",{children:X(s.bucket_start)}),e.jsx(\"td\",{children:s.sample_count}),e.jsx(\"td\",{children:n(u(s,\"supplyC\"),1)}),e.jsx(\"td\",{children:n(u(s,\"returnC\"),1)}),e.jsx(\"td\",{children:n(u(s,\"thermalKW\"),2)}),e.jsx(\"td\",{children:n(u(s,\"cop\"),2)})]},s.bucket_start))})]})})]}):null]}):e.jsx(\"div\",{className:\"empty mt-1\",children:r?\"Select refresh to load details\":\"Choose a device to load telemetry\"})]})})}function Y(l){return l==null?\"-\":typeof l==\"string\"||typeof l==\"number\"||typeof l==\"boolean\"?String(l):\"-\"}function u(l,v){const m=l.values?.[v]?.avg;return typeof m==\"number\"&&Number.isFinite(m)?m:null}function g(l){for(let v=l.length-1;v>=0;v-=1){const o=l[v];if(typeof o==\"number\"&&!Number.isNaN(o))return o}return null}export{te as default};\n",
  "assets/DevicesPage-D9uGgfnL.js": "import{u as y,a as k,r as l,j as e,L}from\"./index-CAv5rt5M.js\";import{P as S,b as A}from\"./format-BvCvFL95.js\";const C={items:[],cursor:null,loading:!1,error:!1};function U(){const u=y(),m=k().user,i=l.useMemo(()=>(m?.roles??[]).some(s=>s.toLowerCase()===\"admin\"),[m?.roles]),[f,h]=l.useState(()=>!i),[b,n]=l.useState(C),a=i?f:!0,r=l.useCallback(async(s,d=!1)=>{n(t=>({items:d?[]:t.items,cursor:d?null:t.cursor,loading:!0,error:!1}));try{const t=new URLSearchParams({limit:\"25\",mine:a?\"1\":\"0\"});s&&t.set(\"cursor\",s);const j=await u.get(`/api/devices?${t.toString()}`),p=j.items??[];n(N=>({items:s&&!d?N.items.concat(p):p,cursor:j.next??null,loading:!1,error:!1}))}catch{n(t=>({...t,loading:!1,error:!0}))}},[u,a]);l.useEffect(()=>{r(null,!0)},[r]);const{items:x,cursor:c,loading:o,error:v}=b,g=i?e.jsxs(\"div\",{className:\"tabs\",role:\"group\",\"aria-label\":\"Device scope filter\",children:[e.jsx(\"button\",{type:\"button\",className:`btn ghost${a?\" active\":\"\"}`,\"aria-pressed\":a,onClick:()=>h(!0),children:\"Assigned\"}),e.jsx(\"button\",{type:\"button\",className:`btn ghost${a?\"\":\" active\"}`,\"aria-pressed\":!a,onClick:()=>h(!1),children:\"All devices\"})]}):null;return e.jsx(S,{title:\"Devices\",actions:g,children:e.jsxs(\"div\",{className:\"card\",children:[e.jsxs(\"div\",{className:\"card-header\",children:[e.jsx(\"div\",{className:\"card-title\",children:\"Devices in scope\"}),v?e.jsx(\"span\",{className:\"pill error\",children:\"Error fetching list\"}):null]}),x.length?e.jsx(\"div\",{className:\"min-table\",children:e.jsxs(\"table\",{className:\"table\",children:[e.jsx(\"thead\",{children:e.jsxs(\"tr\",{children:[e.jsx(\"th\",{children:\"Device\"}),e.jsx(\"th\",{children:\"Site\"}),e.jsx(\"th\",{children:\"Status\"}),e.jsx(\"th\",{children:\"Last seen\"}),e.jsx(\"th\",{children:\"Profile\"})]})}),e.jsx(\"tbody\",{children:x.map(s=>e.jsxs(\"tr\",{children:[e.jsx(\"td\",{children:e.jsx(L,{className:\"link\",to:`/app/device?device=${encodeURIComponent(s.lookup)}`,children:s.device_id})}),e.jsx(\"td\",{children:s.site??\"-\"}),e.jsx(\"td\",{children:e.jsx(\"span\",{className:`status-dot${s.online?\" ok\":\"\"}`,title:s.online?\"Online\":\"Offline\"})}),e.jsx(\"td\",{children:A(s.last_seen_at)}),e.jsx(\"td\",{children:s.profile_id??\"-\"})]},s.lookup))})]})}):e.jsx(\"div\",{className:\"empty\",children:o?\"Loading...\":\"No devices\"}),e.jsxs(\"div\",{className:\"flex-between mt-1\",children:[e.jsx(\"div\",{className:\"subdued\",children:c?\"More devices available\":\"End of list\"}),c?e.jsx(\"button\",{type:\"button\",className:\"btn\",disabled:o,onClick:()=>{r(c)},children:o?\"Loading...\":\"Load more\"}):null]})]})})}export{U as default};\n",
  "assets/GREENBRO LOGO APP.svg": "ï»¿<svg viewBox=\"0 0 320 64\" xmlns=\"http://www.w3.org/2000/svg\" role=\"img\" aria-label=\"GreenBro\">\n  <rect width=\"320\" height=\"64\" rx=\"12\" fill=\"#0b1e14\"/>\n  <text x=\"32\" y=\"40\" font-size=\"28\" font-family=\"Arial, Helvetica, sans-serif\" fill=\"#52ff99\">GreenBro</text>\n</svg>\r\n",
  "assets/Gear_Icon_01.svg": "ï»¿<svg viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n  <circle cx=\"12\" cy=\"12\" r=\"3\" fill=\"#52ff99\"/>\n  <path d=\"M3 12h3m12 0h3M12 3v3m0 12v3M5 5l2.1 2.1M16.9 16.9L19 19M19 5l-2.1 2.1M7.1 16.9 5 19\" stroke=\"#52ff99\" stroke-width=\"2\" fill=\"none\"/>\n</svg>\r\n",
  "assets/Gear_Icon_02.svg": "ï»¿<svg viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n  <rect x=\"6\" y=\"6\" width=\"12\" height=\"12\" rx=\"2\" stroke=\"#52ff99\" stroke-width=\"2\" fill=\"none\"/>\n  <circle cx=\"12\" cy=\"12\" r=\"2\" fill=\"#52ff99\"/>\n</svg>\r\n",
  "assets/Gear_Icon_03.svg": "ï»¿<svg viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n  <path d=\"M4 12a8 8 0 1 0 16 0\" stroke=\"#52ff99\" stroke-width=\"2\" fill=\"none\"/>\n  <path d=\"M12 4a8 8 0 0 0 0 16\" stroke=\"#52ff99\" stroke-width=\"2\" fill=\"none\"/>\n</svg>\r\n",
  "assets/OpsPage-CXH1Qzc6.js": "import{u as T,r as W,j as e}from\"./index-CAv5rt5M.js\";import{u as q,R as w}from\"./RequestErrorCallout-BT33_181.js\";import{P as m,a as r,c as u,f as a}from\"./format-BvCvFL95.js\";function P(){const x=T(),g=W.useCallback(({signal:s})=>x.get(\"/api/ops/overview\",{signal:s}),[x]),{phase:b,data:t,error:j,retry:f,isRetryScheduled:y,nextRetryInMs:$,attempts:R,isFetching:S}=q(g,{autoRefreshMs:6e4}),k=t?\"Issues loading latest operations data\":\"Unable to load operations metrics\",d=j?e.jsx(w,{title:k,error:j,onRetry:f,retryScheduled:y,nextRetryInMs:$,attempts:R,busy:S}):null;if(!t&&b===\"loading\")return e.jsx(m,{title:\"Operations\",children:e.jsx(\"div\",{className:\"card\",children:\"Loading...\"})});if(!t)return e.jsx(m,{title:\"Operations\",children:d??e.jsx(\"div\",{className:\"card callout error\",children:\"Unable to load operations metrics\"})});const{ops_summary:l,devices:i,thresholds:n,ops:c,recent:h,ops_window:o}=t,v=n?.error_rate?.warn??null,N=n?.client_error_rate?.warn??null,p=n?.avg_duration_ms?.warn??null,_=o?`Window: last ${r(o.days,0)} days (since ${u(o.start)})`:null;return e.jsxs(m,{title:\"Operations\",children:[d?e.jsx(\"div\",{style:{marginBottom:\"1rem\"},children:d}):null,e.jsxs(\"div\",{className:\"grid kpis\",children:[e.jsxs(\"div\",{className:\"card tight\",children:[e.jsx(\"div\",{className:\"muted\",children:\"Requests observed\"}),e.jsx(\"div\",{className:\"large-number\",children:r(l.total_requests,0)}),e.jsxs(\"div\",{className:\"subdued\",children:[\"Generated \",u(t.generated_at),_?` â€¢ ${_}`:null]})]}),e.jsxs(\"div\",{className:\"card tight\",children:[e.jsx(\"div\",{className:\"muted\",children:\"Server error rate\"}),e.jsx(\"div\",{className:\"large-number\",children:a(l.server_error_rate*100,2)}),e.jsx(\"div\",{className:\"subdued\",children:v!==null?`Warns at ${a(v*100,2)}`:\"No threshold\"})]}),e.jsxs(\"div\",{className:\"card tight\",children:[e.jsx(\"div\",{className:\"muted\",children:\"Client error rate\"}),e.jsx(\"div\",{className:\"large-number\",children:a(l.client_error_rate*100,2)}),e.jsx(\"div\",{className:\"subdued\",children:N!==null?`Warns at ${a(N*100,2)}`:\"No threshold\"})]}),e.jsxs(\"div\",{className:\"card tight\",children:[e.jsx(\"div\",{className:\"muted\",children:\"Slow requests\"}),e.jsx(\"div\",{className:\"large-number\",children:a(l.slow_rate*100,2)}),e.jsx(\"div\",{className:\"subdued\",children:p!==null?`Warns at ${r(p,0)} ms`:\"No threshold\"})]}),e.jsxs(\"div\",{className:\"card tight\",children:[e.jsx(\"div\",{className:\"muted\",children:\"Devices online\"}),e.jsx(\"div\",{className:\"large-number\",children:r(i.online,0)}),e.jsxs(\"div\",{className:\"subdued\",children:[r(i.offline,0),\" offline (\",a(i.offline_ratio*100,2),\")\"]})]})]}),l.slow_routes.length||l.top_server_error_routes.length?e.jsxs(\"div\",{className:\"card mt-1\",children:[e.jsx(\"div\",{className:\"card-header\",children:e.jsx(\"div\",{className:\"card-title\",children:\"Hotspots\"})}),e.jsxs(\"div\",{className:\"stack\",children:[l.slow_routes.length?e.jsxs(\"div\",{children:[e.jsx(\"div\",{className:\"muted\",children:\"Slow routes\"}),e.jsx(\"ul\",{style:{listStyle:\"none\",padding:0,margin:\"0.25rem 0 0\"},children:l.slow_routes.map(s=>e.jsxs(\"li\",{children:[s.route,\" (\",s.status_code,\") Â· \",r(s.avg_duration_ms,1),\" ms avg Â·\",\" \",r(s.count,0),\" calls\"]},`${s.route}-${s.status_code}`))})]}):null,l.top_server_error_routes.length?e.jsxs(\"div\",{children:[e.jsx(\"div\",{className:\"muted\",children:\"Server errors\"}),e.jsx(\"ul\",{style:{listStyle:\"none\",padding:0,margin:\"0.25rem 0 0\"},children:l.top_server_error_routes.map(s=>e.jsxs(\"li\",{children:[s.route,\" (\",s.status_code,\") Â· \",r(s.count,0),\" errors\"]},`${s.route}-${s.status_code}`))})]}):null]})]}):null,e.jsxs(\"div\",{className:\"card mt-1\",children:[e.jsxs(\"div\",{className:\"card-header\",children:[e.jsx(\"div\",{className:\"card-title\",children:\"Route breakdown\"}),e.jsxs(\"span\",{className:\"pill\",children:[c.length,\" groups\"]})]}),c.length?e.jsx(\"div\",{className:\"min-table\",children:e.jsxs(\"table\",{className:\"table\",children:[e.jsx(\"thead\",{children:e.jsxs(\"tr\",{children:[e.jsx(\"th\",{children:\"Route\"}),e.jsx(\"th\",{children:\"Status\"}),e.jsx(\"th\",{children:\"Count\"}),e.jsx(\"th\",{children:\"Avg ms\"}),e.jsx(\"th\",{children:\"Max ms\"}),e.jsx(\"th\",{children:\"Total ms\"})]})}),e.jsx(\"tbody\",{children:c.map(s=>e.jsxs(\"tr\",{children:[e.jsx(\"td\",{children:s.route}),e.jsx(\"td\",{children:s.status_code}),e.jsx(\"td\",{children:r(s.count,0)}),e.jsx(\"td\",{children:r(s.avg_duration_ms,1)}),e.jsx(\"td\",{children:r(s.max_duration_ms,1)}),e.jsx(\"td\",{children:r(s.total_duration_ms,1)})]},`${s.route}-${s.status_code}`))})]})}):e.jsx(\"div\",{className:\"empty\",children:\"No aggregated metrics\"})]}),e.jsxs(\"div\",{className:\"card mt-1\",children:[e.jsxs(\"div\",{className:\"card-header\",children:[e.jsx(\"div\",{className:\"card-title\",children:\"Recent events\"}),e.jsxs(\"span\",{className:\"pill\",children:[h.length,\" events\"]})]}),h.length?e.jsx(\"div\",{className:\"min-table\",children:e.jsxs(\"table\",{className:\"table\",children:[e.jsx(\"thead\",{children:e.jsxs(\"tr\",{children:[e.jsx(\"th\",{children:\"Timestamp\"}),e.jsx(\"th\",{children:\"Route\"}),e.jsx(\"th\",{children:\"Status\"}),e.jsx(\"th\",{children:\"Duration ms\"}),e.jsx(\"th\",{children:\"Device\"})]})}),e.jsx(\"tbody\",{children:h.map((s,C)=>e.jsxs(\"tr\",{children:[e.jsx(\"td\",{children:u(s.ts)}),e.jsx(\"td\",{children:s.route}),e.jsx(\"td\",{children:s.status_code}),e.jsx(\"td\",{children:r(s.duration_ms,1)}),e.jsx(\"td\",{children:s.device_id?s.lookup?e.jsx(\"a\",{className:\"link\",href:`/app/device?device=${encodeURIComponent(s.lookup)}`,children:s.device_id}):s.device_id:\"-\"})]},`${s.ts}-${C}`))})]})}):e.jsx(\"div\",{className:\"empty\",children:\"No recent events\"})]})]})}export{P as default};\n",
  "assets/OverviewPage-CmJl3bQb.js": "import{u as j,r as N,j as e}from\"./index-CAv5rt5M.js\";import{u as g,R as f}from\"./RequestErrorCallout-BT33_181.js\";import{P as t,f as p,a as r,b as _}from\"./format-BvCvFL95.js\";function R(){const i=j(),d=N.useCallback(({signal:x})=>i.get(\"/api/fleet/summary\",{signal:x}),[i]),{phase:c,data:s,error:l,retry:n,isRetryScheduled:m,nextRetryInMs:o,attempts:u,isFetching:v}=g(d),h=s?\"Issues loading latest fleet metrics\":\"Failed to load fleet metrics\",a=l?e.jsx(f,{title:h,error:l,onRetry:n,retryScheduled:m,nextRetryInMs:o,attempts:u,busy:v}):null;return!s&&c===\"loading\"?e.jsx(t,{title:\"Overview (Fleet)\",children:e.jsx(\"div\",{className:\"card\",children:\"Loading...\"})}):s?e.jsxs(t,{title:\"Overview (Fleet)\",children:[a?e.jsx(\"div\",{style:{marginBottom:\"1rem\"},children:a}):null,e.jsxs(\"div\",{className:\"grid kpis\",children:[e.jsxs(\"div\",{className:\"card tight\",children:[e.jsx(\"div\",{className:\"muted\",children:\"Online %\"}),e.jsx(\"div\",{className:\"large-number\",children:p(s.online_pct)}),e.jsxs(\"div\",{className:\"subdued\",children:[s.devices_online,\"/\",s.devices_total,\" online\"]})]}),e.jsxs(\"div\",{className:\"card tight\",children:[e.jsx(\"div\",{className:\"muted\",children:\"Avg COP (24h)\"}),e.jsx(\"div\",{className:\"large-number\",children:r(s.avg_cop_24h,2)}),e.jsxs(\"div\",{className:\"subdued\",children:[\"Window start \",_(s.window_start_ms)]})]}),e.jsxs(\"div\",{className:\"card tight\",children:[e.jsx(\"div\",{className:\"muted\",children:\"Low ?T events\"}),e.jsx(\"div\",{className:\"large-number\",children:r(s.low_deltaT_count_24h??0,0)}),e.jsxs(\"div\",{className:\"subdued\",children:[\"Oldest heartbeat \",r((s.max_heartbeat_age_sec??0)/60,1),\"m\"]})]})]}),e.jsxs(\"div\",{className:\"card mt-1\",children:[e.jsx(\"div\",{className:\"card-title\",children:\"Devices\"}),e.jsxs(\"div\",{className:\"subdued\",children:[s.devices_online,\"/\",s.devices_total,\" online\"]})]})]}):e.jsx(t,{title:\"Overview (Fleet)\",children:a??e.jsx(\"div\",{className:\"card callout error\",children:\"Failed to load fleet metrics\"})})}export{R as default};\n",
  "assets/RequestErrorCallout-BT33_181.js": "import{r as e,A as K,j as o}from\"./index-CAv5rt5M.js\";const j={initialDelayMs:2e3,multiplier:2,maxDelayMs:3e4};function L(t){return t?{initialDelayMs:t.initialDelayMs??j.initialDelayMs,multiplier:t.multiplier??j.multiplier,maxDelayMs:t.maxDelayMs??j.maxDelayMs}:j}function W(t,r){const i=Math.max(0,t-1),f=r.initialDelayMs*r.multiplier**i;return Math.min(r.maxDelayMs,f)}function _(t){if(t){if(typeof t==\"string\")return t;if(typeof t==\"number\"||typeof t==\"boolean\")return String(t);if(typeof t==\"object\"){const r=t.message??t.error??t.detail??t.title;return typeof r==\"string\"?r:void 0}}}function G(t){if(t instanceof K){const r=_(t.body),i=t.status>=500||t.status===429||t.status===408;return{message:`API request failed (${t.status})`,description:r,status:t.status,cause:t,retryable:i}}return t instanceof DOMException&&t.name===\"AbortError\"?{message:\"Request cancelled\",cause:t,retryable:!1}:t instanceof Error?{message:t.message||\"Request failed\",description:typeof t.cause==\"string\"?t.cause:void 0,cause:t,retryable:!0}:{message:\"Request failed\",cause:t,retryable:!0}}function X(t,r={}){const{initialData:i=null,autoRefreshMs:f,enableAutoRetry:A=!0,backoff:g,onSuccess:b,onError:S}=r,m=e.useMemo(()=>L(g),[g]),[s,I]=e.useState(()=>({phase:i?\"ready\":\"loading\",data:i,error:null,isFetching:!1,attempts:0,isRetryScheduled:!1,nextRetryInMs:null,lastUpdatedAt:i?Date.now():null,lastErrorAt:null})),h=e.useRef(s),M=e.useRef(!0),w=e.useRef(null),D=e.useRef(null),k=e.useRef(null),a=e.useRef(null),E=e.useRef(null);e.useEffect(()=>{h.current=s},[s]);const N=e.useCallback(n=>{I(p=>{const u=typeof n==\"function\"?n(p):n;return h.current=u,u})},[]),d=e.useCallback(n=>{M.current&&N(n)},[N]),C=e.useCallback(()=>{a.current&&(clearInterval(a.current),a.current=null)},[]),y=e.useCallback(()=>{k.current&&(clearTimeout(k.current),k.current=null)},[]),R=e.useCallback(()=>{D.current&&(clearTimeout(D.current),D.current=null),E.current=null,C(),d(n=>!n.isRetryScheduled&&n.nextRetryInMs===null?n:{...n,isRetryScheduled:!1,nextRetryInMs:null})},[C,d]),q=e.useCallback(()=>{E.current&&(C(),a.current=setInterval(()=>{if(!M.current){a.current&&(clearInterval(a.current),a.current=null);return}const n=E.current;if(!n){a.current&&(clearInterval(a.current),a.current=null);return}const p=Math.max(0,n-Date.now());d(u=>!u.isRetryScheduled||u.nextRetryInMs===p?u:{...u,nextRetryInMs:p}),p<=0&&a.current&&(clearInterval(a.current),a.current=null)},250))},[C,d]),x=e.useCallback(n=>{const p=!!n?.manual,u=!!n?.silent,B=n?.resetAttempts??p;R(),y();const v=new AbortController;w.current?.abort(),w.current=v;const U=h.current.data!==null;d(l=>{const c={...l,isFetching:!0,isRetryScheduled:!1,nextRetryInMs:null};return B&&(c.attempts=0),u||(c.phase=U?l.phase:\"loading\",U||(c.error=null)),c}),t({signal:v.signal}).then(l=>{M.current&&(R(),y(),d(c=>({phase:\"ready\",data:l,error:null,isFetching:!1,attempts:0,isRetryScheduled:!1,nextRetryInMs:null,lastUpdatedAt:Date.now(),lastErrorAt:c.lastErrorAt})),b?.(l),f&&f>0&&(k.current=setTimeout(()=>{x({silent:!0,resetAttempts:!0})},f)))}).catch(l=>{if(!M.current||v.signal.aborted||l instanceof DOMException&&l.name===\"AbortError\"||l instanceof Error&&l.name===\"AbortError\")return;y();const c=G(l),$=(B?0:h.current.attempts)+1,O=h.current.data!==null?\"ready\":\"error\",T=W($,m),F=A&&c.retryable;d(H=>({...H,phase:O,error:c,isFetching:!1,attempts:$,isRetryScheduled:F,nextRetryInMs:F?T:null,lastErrorAt:Date.now()})),S?.(l,c),F&&(E.current=Date.now()+T,D.current=setTimeout(()=>{D.current=null,E.current=null,x({silent:h.current.data!==null})},T),q())})},[f,m,y,A,S,b,t,d,q,R]),P=e.useCallback(()=>{const n=h.current.data!==null;x({manual:!0,silent:n,resetAttempts:!0})},[x]),z=e.useCallback(()=>{R()},[R]);return e.useEffect(()=>(x(),()=>{M.current=!1,w.current?.abort(),R(),y()}),[y,x,R]),{phase:s.phase,data:s.data,error:s.error,isFetching:s.isFetching,attempts:s.attempts,isRetryScheduled:s.isRetryScheduled,nextRetryInMs:s.nextRetryInMs,lastUpdatedAt:s.lastUpdatedAt,lastErrorAt:s.lastErrorAt,retry:P,cancelRetry:z}}function Y({title:t,error:r,onRetry:i,retryScheduled:f,nextRetryInMs:A,attempts:g,busy:b=!1}){const S=r.description??r.message,m=f&&typeof A==\"number\"?Math.max(0,Math.ceil(A/1e3)):null,s=[];g>0&&s.push(`Attempt ${g}`),m!==null?s.push(`Retrying in ${m}s`):r.retryable||s.push(\"Auto retry disabled\");const I=s.length?s.join(\" â€¢ \"):null;return o.jsxs(\"div\",{className:\"card callout error\",children:[o.jsx(\"div\",{children:o.jsx(\"strong\",{children:t})}),o.jsx(\"div\",{children:S}),r.status?o.jsx(\"div\",{className:\"muted\",children:`HTTP status ${r.status}`}):null,I?o.jsx(\"div\",{className:\"muted\",children:I}):null,o.jsxs(\"div\",{className:\"mt-1\",style:{display:\"flex\",gap:\"0.5rem\",flexWrap:\"wrap\",alignItems:\"center\"},children:[o.jsx(\"button\",{type:\"button\",className:\"btn\",onClick:i,disabled:b,children:b?\"Retrying...\":\"Retry now\"}),m!==null?o.jsx(\"span\",{className:\"subdued\",children:`Next attempt in ${m}s`}):null]})]})}export{Y as R,X as u};\n",
  "assets/Sparkline-D2W6pTJo.js": "import{j as e}from\"./index-CAv5rt5M.js\";function h({values:a=[],color:i=\"#52ff99\",emptyLabel:l=\"No data\"}){const n=a.filter(t=>typeof t==\"number\"&&!Number.isNaN(t));if(n.length===0)return e.jsx(\"div\",{className:\"empty\",children:l});const o=Math.min(...n),r=Math.max(...n),s=n.map((t,m)=>{const c=n.length===1?100:m/(n.length-1)*100,p=100-(r===o?.5:(t-o)/(r-o))*100;return`${c.toFixed(2)},${p.toFixed(2)}`}).join(\" \");return e.jsxs(\"svg\",{className:\"sparkline\",viewBox:\"0 0 100 100\",role:\"img\",\"aria-label\":\"sparkline chart\",children:[e.jsx(\"polyline\",{points:s,fill:\"none\",stroke:i,strokeWidth:6,opacity:.08,strokeLinecap:\"round\"}),e.jsx(\"polyline\",{points:s,fill:\"none\",stroke:i,strokeWidth:2,strokeLinecap:\"round\",strokeLinejoin:\"round\"})]})}export{h as S};\n",
  "assets/format-BvCvFL95.js": "import{j as o}from\"./index-CAv5rt5M.js\";function c({title:t,actions:r=null,children:e}){return o.jsxs(\"div\",{className:\"wrap\",children:[o.jsxs(\"div\",{className:\"page-header\",children:[o.jsx(\"h2\",{className:\"page-title\",children:t}),r]}),e]})}function f(t,r=1){if(t==null||Number.isNaN(t))return\"ï¿½\";const e=Math.pow(10,r);return String(Math.round(t*e)/e)}function d(t,r=0){return t==null||Number.isNaN(t)?\"ï¿½\":`${f(t,r)}%`}function N(t){if(!t)return\"ï¿½\";const r=typeof t==\"number\"?new Date(t):new Date(String(t));if(Number.isNaN(r.getTime()))return String(t);const e=Date.now()-r.getTime(),n=e>=0?\"ago\":\"from now\",i=Math.abs(e);if(i<6e4)return\"just now\";const a=Math.round(i/6e4);if(a<60)return`${a}m ${n}`;const s=Math.round(a/60);return s<48?`${s}h ${n}`:`${Math.round(s/24)}d ${n}`}function g(t){if(!t)return\"ï¿½\";const r=typeof t==\"number\"?new Date(t):new Date(String(t));return Number.isNaN(r.getTime())?String(t):r.toLocaleString()}export{c as P,f as a,N as b,g as c,d as f};\n",
  "assets/index-y6znqhWW.css": ":root{color-scheme:dark;--bg:#0b0f10;--card:#11181a;--muted:#6b7f7a;--fg:#e9ffef;--brand:#52ff99;--warn:#ffcc66;--err:#ff7a7a;--ok:#7dffa1}*{box-sizing:border-box}html,body,#root{height:100%}body{margin:0;background:var(--bg);color:var(--fg);font:14px/1.45 Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif}a{color:var(--brand);text-decoration:none}.nav{display:flex;gap:.75rem;align-items:center;padding:.75rem 1rem;border-bottom:1px solid #17322a;background:#0d1415;position:sticky;top:0;z-index:10}.nav .brand{display:flex;align-items:center;gap:.5rem;font-weight:600;font-size:15px}.tag{padding:.1rem .5rem;border-radius:.5rem;background:#143c2c;color:#72ffb6;font-size:12px;text-transform:uppercase;letter-spacing:.08em}.sp{flex:1}.btn{background:#123026;border:1px solid #1d4a39;color:var(--fg);padding:.5rem .85rem;border-radius:.6rem;cursor:pointer;font-weight:500}.btn:hover{background:#173a2e}.btn.ghost{background:transparent;color:var(--muted);border-color:#1d4032}.btn.ghost.active{color:var(--fg);background:#123026}.wrap{max-width:1180px;margin:0 auto;padding:1.2rem}.page-header{display:flex;justify-content:space-between;align-items:center;gap:1rem;flex-wrap:wrap;margin-bottom:1rem}.page-title{margin:0}.flex-between{display:flex;justify-content:space-between;align-items:center}.flex-basis-220{flex:1 1 220px}.align-self-end{align-self:flex-end}.status-row{display:flex;align-items:center;gap:.5rem;margin-top:.4rem}.font-semibold{font-weight:600}.text-right{text-align:right}.trend-subtitle{font-size:16px;font-weight:600;margin-top:.2rem}.card-section{padding:0 1rem 1rem}.inline-link{display:inline-block;margin-top:.4rem}.mt-1{margin-top:1rem}.mt-06{margin-top:.6rem}.mt-04{margin-top:.4rem}.mt-02{margin-top:.2rem}.mb-1{margin-bottom:1rem}.grid{display:grid;gap:1rem}.grid.kpis{grid-template-columns:repeat(auto-fit,minmax(200px,1fr))}.grid.auto{grid-template-columns:repeat(auto-fit,minmax(220px,1fr))}.grid-3{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:.75rem}.card{background:var(--card);border:1px solid #15352a;border-radius:1rem;padding:1rem;box-shadow:0 10px 25px #0000002e}.card.tight{padding:.75rem}.card-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:.6rem}.card-title{font-size:16px;font-weight:600}.muted{color:var(--muted)}.hero,.large-number{font-size:32px;font-weight:600}.subdued{color:#889a94;font-size:12px}.pill{display:inline-flex;align-items:center;gap:.35rem;padding:.2rem .55rem;border-radius:999px;background:#133126;color:#7dffa1;font-size:12px;text-transform:uppercase;letter-spacing:.08em}.pill.warn{background:#3a2e1a;color:var(--warn)}.pill.error{background:#3a1f1f;color:var(--err)}.chip{background:#102119;border:1px solid #1f4532;border-radius:.6rem;padding:.2rem .55rem;font-size:12px;display:inline-flex;align-items:center;gap:.3rem;color:#7dffa1}.chip.warn{border-color:#4d3c20;color:var(--warn);background:#2a2113}.chip.error{border-color:#4a2020;color:var(--err);background:#2a1414}table{width:100%;border-collapse:collapse}.table th,.table td{padding:.55rem .65rem;border-bottom:1px solid #163226;text-align:left;font-size:13px}.table tr:hover{background:#52ff990d}.status-dot{display:inline-block;width:8px;height:8px;border-radius:50%;background:#ff7a7a}.status-dot.ok{background:#7dffa1}.sparkline{width:100%;height:60px}.list{display:flex;flex-direction:column;gap:.8rem}.list-item{display:flex;justify-content:space-between;align-items:flex-start;border:1px solid #163226;border-radius:.85rem;padding:.85rem;background:#0f1716;gap:.75rem}.list-item .meta{font-size:12px;color:var(--muted)}.metric-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:.75rem}.metric-tile{background:#101918;border:1px solid #1b382f;border-radius:.85rem;padding:.75rem}.metric-label{color:var(--muted);font-size:12px;text-transform:uppercase;letter-spacing:.08em}.metric-value{margin-top:.35rem;font-size:20px;font-weight:600}.metric-sub{color:#86a59c;font-size:12px;margin-top:.2rem}.checklist{display:flex;flex-direction:column;gap:.45rem;margin-top:.6rem}.check-item{display:flex;justify-content:space-between;align-items:center;background:#101b19;border:1px solid #1b382f;border-radius:.7rem;padding:.45rem .6rem}.check-item.fail{background:#1a1111;border-color:#3e1c1c}.check-item span{font-size:13px}.progress-bar{appearance:none;-webkit-appearance:none;width:100%;height:8px;border-radius:999px;background:#132320;margin-top:.4rem;overflow:hidden;border:none}.progress-bar::-webkit-progress-bar{background:#132320;border-radius:999px}.progress-bar::-webkit-progress-value{background:linear-gradient(90deg,#1fcc78,#52ff99);border-radius:999px}.progress-bar::-moz-progress-bar{background:linear-gradient(90deg,#1fcc78,#52ff99);border-radius:999px}input,select{background:#0e1516;border:1px solid #193a30;color:var(--fg);border-radius:.6rem;padding:.5rem .6rem;font-size:14px}.flex{display:flex;gap:1rem;flex-wrap:wrap}.two-column{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:1rem}.empty{color:var(--muted);font-style:italic}.tabs{display:flex;gap:.5rem;margin-bottom:1rem;flex-wrap:wrap}.stack{display:flex;flex-direction:column;gap:.75rem}.callout{background:#11231d;border:1px solid #1d4032;border-radius:.8rem;padding:.75rem;font-size:13px;color:#7dffa1}.callout.warn{background:#2a2113;border-color:#4a3a1a;color:var(--warn)}.callout.error{background:#2a1414;border-color:#4a2020;color:var(--err)}.min-table{max-height:320px;overflow:auto}.chart-card{padding:0}.chart-card svg{display:block;width:100%;height:160px}.section-title{font-size:18px;margin:0 0 .5rem;font-weight:600}.link{color:var(--brand);text-decoration:none}.link:hover{text-decoration:underline}.mono{font-family:JetBrains Mono,monospace}.badge{border:1px solid #2b5a49;border-radius:.4rem;padding:.2rem .45rem;font-size:12px}.pill+.pill{margin-left:.4rem}.card-group{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:1rem}.history-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:.75rem}.history-card{background:#101918;border:1px solid #1b382f;border-radius:.75rem;padding:.6rem .75rem}.history-card strong{font-size:16px}@media(max-width:720px){.nav{flex-wrap:wrap;gap:.5rem}.nav .brand{margin-bottom:.25rem}.nav-links{flex-wrap:wrap;width:100%;margin-left:0}.nav-link{padding:.3rem .5rem}.nav .sp{display:none}.grid.kpis{grid-template-columns:repeat(auto-fit,minmax(160px,1fr))}}\n"
} as const;
export type StaticBundleKey = keyof typeof STATIC_BUNDLE;
